@page "/customer"
@using CRM.Shared
@inject HttpClient http

<PageTitle>CustomersIndex</PageTitle>

@if (customers == null)
{
    <p><em>Loading..</em></p>
}
else
{
 <table class="table">
  <thead>
    <tr>
        <th>Name</th>
        <th>Phonenumber</th>
        <th>Servicehours</th>
        <th>Date Modified</th>
    </tr>
</thead>
<tbody>

            @foreach(var customer in customers)
            {
              <tr>
                    <td>@customer.Name</td>
                    <td>@customer.PhoneNumber</td>
                    <td>@customer.ServiceHours</td>
                    <td>@customer.DateModified</td>

              </tr>
            }
        </tbody>
 </table>
   
}


@code {
    private List<CRM.Shared.Model.Customer> customers;


    protected override async Task OnInitializedAsync()
    {
        customers = await http.GetFromJsonAsync<List<CRM.Shared.Model.Customer>>("api/Customers");
    }
}